<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–≤–µ—Ä—Ç—é—Ä–∞ –ò–æ—Ä–¥–∞–Ω ‚Äî –ö–∏—Å–ª–æ—Ç–Ω—ã–π –¢—Ä–∏–ø</title>

    <link href="https://fonts.googleapis.com/css2?family=Monoton&family=Orbitron:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- WebGL —Ñ–æ–Ω–æ–≤—ã–π –∫–∞–Ω–≤–∞—Å -->
<canvas id="acid"></canvas>

<!-- –õ–µ–≥–∫–∏–π –¥—ã–º -->
<div class="smoke-layer"></div>

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<nav id="nav">
    <ul>
        <li><a href="#home">–ì–ª–∞–≤–Ω–∞—è</a></li>
        <li><a href="#albums">–ê–ª—å–±–æ–º—ã</a></li>
        <li><a href="#gallery">–ì–∞–ª–µ—Ä–µ—è</a></li>
    </ul>
</nav>

<!-- –ì–ª–∞–≤–Ω–∞—è —Å–µ–∫—Ü–∏—è -->
<section id="home" class="section home">
    <h1 class="title glitch">–£–≤–µ—Ä—Ç—é—Ä–∞ –ò–æ—Ä–¥–∞–Ω</h1>
    <p class="tag">–ü—Å–∏—Ö–æ–¥–µ–ª–∏—á–µ—Å–∫–∏–π —Ä–æ–∫ / —Ä–µ–≥–≥–∏</p>

    <button class="enter" onclick="document.getElementById('albums').scrollIntoView({behavior:'smooth'})">
        –í–æ–π—Ç–∏ –≤ –¢—Ä–∏–ø
    </button>
</section>

<!-- –ê–ª—å–±–æ–º—ã -->
<section id="albums" class="section">
    <h2 class="sec-title">–ê–ª—å–±–æ–º—ã</h2>

    <div class="album-grid">
        <div class="album-card">
            <img src="albums/album1.jpg">
            <h3>–ü—Å–∏—Ö–æ–°—Ñ–µ—Ä–∞</h3>
            <audio controls>
                <source src="albums/album1/track1.mp3">
            </audio>
        </div>

        <div class="album-card">
            <img src="albums/album2.jpg">
            <h3>–†–µ–≥–≥–∏–ì–∞–ª–∞–∫—Ç–∏–∫–∞</h3>
            <audio controls>
                <source src="albums/album2/track1.mp3">
            </audio>
        </div>
    </div>
</section>

<!-- –ì–∞–ª–µ—Ä–µ—è -->
<section id="gallery" class="section">
    <h2 class="sec-title">–ì–∞–ª–µ—Ä–µ—è</h2>

    <div class="gallery-grid">
        <img src="gallery/img1.jpg" class="gal-img">
        <img src="gallery/img2.jpg" class="gal-img">
        <img src="gallery/img3.jpg" class="gal-img">
    </div>
</section>

<!-- üî• –ö–ò–°–õ–û–¢–ù–´–ô WEBGL ‚Äî –í–°–¢–†–û–ï–ù –í HTML -->
<script>
const canvas = document.getElementById("acid");
const gl = canvas.getContext("webgl");
let then = 0;

function resize() {
    canvas.width = document.documentElement.scrollWidth;
    canvas.height = document.documentElement.scrollHeight;
    gl.viewport(0, 0, canvas.width, canvas.height);
}
resize();
window.addEventListener("resize", resize);

/* --- –®–µ–π–¥–µ—Ä—ã (WebGL Acid Plasma) --- */
const vertex = `
attribute vec2 position;
void main() {
    gl_Position = vec4(position, 0.0, 1.0);
}`;
    
const fragment = `
precision highp float;
uniform float time;
uniform vec2 resolution;

void main() {
    vec2 uv = gl_FragCoord.xy / resolution.xy;
    uv -= 0.5;
    uv.x *= resolution.x/resolution.y;

    float r = length(uv);
    float a = atan(uv.y, uv.x);

    float f = sin(a*3.0 + time*0.7)
            + cos(r*12.0 - time*1.5)
            + sin((uv.x+uv.y)*10.0 - time*1.2);

    float c = sin(f + time*0.5);

    gl_FragColor = vec4(
        0.6 + 0.4*sin(c*3.0 + time),
        0.6 + 0.4*sin(c*5.0 + time*0.5),
        0.6 + 0.4*sin(c*7.0 + time*2.0),
        1.0);
}`;

/* --- –ö–æ–º–ø–∏–ª—è—Ü–∏—è --- */
function compile(type, src) {
    const s = gl.createShader(type);
    gl.shaderSource(s, src);
    gl.compileShader(s);
    return s;
}

const vs = compile(gl.VERTEX_SHADER, vertex);
const fs = compile(gl.FRAGMENT_SHADER, fragment);
const prog = gl.createProgram();

gl.attachShader(prog, vs);
gl.attachShader(prog, fs);
gl.linkProgram(prog);
gl.useProgram(prog);

const buf = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buf);
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
    -1,-1, 1,-1, -1,1, 1,1
]), gl.STATIC_DRAW);

const pos = gl.getAttribLocation(prog, "position");
gl.enableVertexAttribArray(pos);
gl.vertexAttribPointer(pos, 2, gl.FLOAT, false, 0, 0);

const timeUL = gl.getUniformLocation(prog, "time");
const resUL = gl.getUniformLocation(prog, "resolution");

/* --- –†–µ–Ω–¥–µ—Ä --- */
function render(now) {
    now *= 0.001;
    const dt = now - then;
    then = now;

    gl.uniform1f(timeUL, now * 1.5);
    gl.uniform2f(resUL, canvas.width, canvas.height);

    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
    requestAnimationFrame(render);
}
render(0);

/* --- –°–∫—Ä–æ–ª–ª-–∏—Å–∫–∞–∂–µ–Ω–∏–µ --- */
window.addEventListener("scroll", () => {
    let s = window.scrollY * 0.015;
    canvas.style.transform = `scale(1.05) translateY(${s}px)`;
});
</script>

</body>
</html>
