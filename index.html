<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Увертюра Иордан — Психоделическая Вселенная</title>

    <link href="https://fonts.googleapis.com/css2?family=Monoton&family=Orbitron:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ФОНЫ -->
<canvas id="waves"></canvas>
<canvas id="smoke"></canvas>

<!-- НАВИГАЦИЯ -->
<nav id="main-nav">
    <ul>
        <li><a href="#home">Главная</a></li>
        <li><a href="#albums">Альбомы</a></li>
        <li><a href="#gallery">Галерея</a></li>
    </ul>
</nav>

<!-- ГЛАВНАЯ -->
<section id="home" class="section home-section">
    <h1 class="title glitch">Увертюра Иордан</h1>
    <p class="tagline">Психоделический рок / регги</p>
    <button class="btn-enter" onclick="document.getElementById('albums').scrollIntoView({behavior:'smooth'})">
        Войти в мир
    </button>
</section>

<!-- АЛЬБОМЫ -->
<section id="albums" class="section">
    <h2 class="section-title">Альбомы</h2>

    <div class="album-grid">
        <div class="album-card">
            <img src="albums/album1.jpg" alt="">
            <h3>ПсихоСфера</h3>
            <audio controls>
                <source src="albums/album1/track1.mp3" type="audio/mpeg">
            </audio>
        </div>

        <div class="album-card">
            <img src="albums/album2.jpg" alt="">
            <h3>РеггиГалактика</h3>
            <audio controls>
                <source src="albums/album2/track1.mp3" type="audio/mpeg">
            </audio>
        </div>
    </div>
</section>

<!-- ГАЛЕРЕЯ -->
<section id="gallery" class="section">
    <h2 class="section-title">Галерея</h2>
    <div class="gallery-grid">
        <img src="gallery/img1.jpg" class="gallery-img">
        <img src="gallery/img2.jpg" class="gallery-img">
        <img src="gallery/img3.jpg" class="gallery-img">
    </div>
</section>

<!-- ВСЯ АНИМАЦИЯ ВСТРОЕНА -->
<script>
/* ---------- CANVAS SIZE ---------- */
function resizeCanvas(c) {
    c.width = document.documentElement.scrollWidth;
    c.height = document.documentElement.scrollHeight;
}

const waves = document.getElementById("waves");
const smoke = document.getElementById("smoke");

resizeCanvas(waves);
resizeCanvas(smoke);

window.addEventListener("resize", () => {
    resizeCanvas(waves);
    resizeCanvas(smoke);
});

/* ---------- ПСИХОДЕЛИЧЕСКИЕ ВОЛНЫ ---------- */
const wctx = waves.getContext("2d");
let t = 0;

function drawWaves() {
    wctx.clearRect(0,0,waves.width,waves.height);

    for (let y = 0; y < waves.height; y += 40) {
        for (let x = 0; x < waves.width; x += 40) {
            let dx = Math.sin((x+t)*0.01) * 20;
            let dy = Math.cos((y+t)*0.01) * 20;
            wctx.fillStyle = `hsl(${(x+y+t)/10 % 360}, 80%, 55%)`;
            wctx.fillRect(x+dx, y+dy, 15, 15);
        }
    }

    t += 0.8;
    requestAnimationFrame(drawWaves);
}
drawWaves();

/* ---------- ДЫМ / ТУМАН ---------- */
const sctx = smoke.getContext("2d");
let p = 0;

function drawSmoke() {
    sctx.clearRect(0,0,smoke.width,smoke.height);

    for (let i = 0; i < 200; i++) {
        let x = Math.sin(i*0.5 + p*0.02) * 300 + smoke.width/2;
        let y = Math.cos(i*0.3 + p*0.015) * 250 + smoke.height/2;

        sctx.fillStyle = `hsla(${(i*5 + p)%360}, 90%, 65%, 0.1)`;
        sctx.beginPath();
        sctx.arc(x, y, 120, 0, Math.PI*2);
        sctx.fill();
    }

    p += 1;
    requestAnimationFrame(drawSmoke);
}
drawSmoke();

/* ---------- ИСКАЖЕНИЕ ПРИ СКРОЛЛЕ ---------- */
window.addEventListener("scroll", () => {
    let sc = window.scrollY * 0.02;
    waves.style.transform = `scale(1.05) translateY(${sc}px)`;
    smoke.style.transform = `scale(1.1) translateY(${sc*1.5}px)`;
});
</script>

</body>
</html>
